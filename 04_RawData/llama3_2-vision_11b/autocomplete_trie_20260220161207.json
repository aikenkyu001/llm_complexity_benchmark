{
  "task_name": "autocomplete_trie",
  "model": "llama3.2-vision:11b",
  "timestamp": "2026-02-20T16:12:07.339529",
  "nl_problem": "# Task: Autocomplete System\n# Interface:\nClass: Solution\nMethod: initAutocomplete(self, sentences: List[str], times: List[int]) -> None\nMethod: query(self, prefix: str) -> List[str]\n\nDesign an autocomplete system that returns the top 3 historical sentences that start with the same prefix.\nThe system is initialized with a list of sentences and their respective search counts (times).\n- `initAutocomplete(sentences, times)`: Initializes the system.\n- `query(prefix)`: Returns the top 3 hot sentences starting with the prefix. If multiple sentences have the same frequency, return them in lexicographical order.\n\n# Implementation Hint:\nUse a Trie to store sentences. Each node in the Trie can store the historical sentences and their frequencies passing through that node.\nFor the `query` method, navigate to the node representing the prefix and retrieve the top results.\n\nConstraints:\n- Sentences contain only lowercase English letters and spaces.\n- Up to 100 historical sentences.",
  "lisp_spec": "(task\n  (name \"initAutocomplete\")\n  (signature ( (sentences (list str)) (times (list int)) ) none)\n  (constraints\n    (constraint \"Sentences contain only lowercase English letters and spaces.\")\n    (constraint \"Up to 100 historical sentences.\")\n  )\n  (goal\n    (description \"Initialize the autocomplete system with sentences and their search counts.\")\n    (rule \"Store sentences in a Trie data structure.\")\n    (return \"None\")\n  )\n)\n\n(task\n  (name \"query\")\n  (signature ( (prefix str) ) (list str))\n  (constraints\n    (constraint \"Sentences contain only lowercase English letters and spaces.\")\n    (constraint \"Up to 100 historical sentences.\")\n  )\n  (goal\n    (description \"Return the top 3 hot sentences starting with the prefix.\")\n    (rule \"Navigate to the node representing the prefix in the Trie.\")\n    (rule \"Retrieve the top results in lexicographical order if multiple sentences have the same frequency.\")\n    (return \"The top 3 hot sentences starting with the prefix.\")\n  )\n))",
  "generated_code": "from typing import List, Optional, Dict, Set, Any\nimport heapq\nimport collections\n\nclass TrieNode:\n    def __init__(self):\n        self.children = collections.defaultdict(TrieNode)\n        self.is_end_of_word = False\n        self.count = 0\n\nclass AutocompleteSystem:\n    def __init__(self, sentences: List[str], times: List[int]):\n        self.root = TrieNode()\n        for sentence, time in zip(sentences, times):\n            self.insert(sentence, time)\n\n    def insert(self, sentence: str, time: int):\n        node = self.root\n        for char in sentence:\n            node = node.children[char]\n        node.is_end_of_word = True\n        node.count = time\n\n    def query(self, prefix: str) -> List[str]:\n        node = self.root\n        for char in prefix:\n            if char not in node.children:\n                return []\n            node = node.children[char]\n        return self._get_top_sentences(node, prefix)\n\n    def _get_top_sentences(self, node: TrieNode, prefix: str) -> List[str]:\n        sentences = []\n        stack = [(node, prefix)]\n        while stack:\n            node, prefix = stack.pop()\n            if node.is_end_of_word:\n                sentences.append((prefix, node.count))\n            for char, child in node.children.items():\n                stack.append((child, prefix + char))\n        sentences.sort(key=lambda x: (-x[1], x[0]))\n        return [sentence[0] for sentence in heapq.nlargest(3, sentences)]\n\nclass Solution:\n    def initAutocomplete(self, sentences: List[str], times: List[int]) -> 'AutocompleteSystem':\n        return AutocompleteSystem(sentences, times)\n\n    def query(self, prefix: str) -> List[str]:\n        return self.root.query(prefix)",
  "test_passed": false,
  "test_output": "============================= test session starts ==============================\nplatform darwin -- Python 3.14.3, pytest-9.0.2, pluggy-1.6.0\nrootdir: /private/test/llm_complexity_benchmark\nplugins: anyio-4.12.1\ncollected 1 item\n\n01_TestDefinitions/autocomplete_trie/test_solution.py F                  [100%]\n\n=================================== FAILURES ===================================\n___________________________ test_autocomplete_basic ____________________________\n\n    def test_autocomplete_basic():\n        sentences = [\"i love you\", \"island\", \"ironman\", \"i love leetcode\"]\n        times = [5, 3, 2, 2]\n        # In a real scenario, this might be a class. Let's assume a class AutocompleteSystem.\n        # For this task, we will simplify it to a method.\n        solution = Solution()\n        solution.initAutocomplete(sentences, times)\n    \n>       assert solution.query(\"i\") == [\"i love you\", \"island\", \"i love leetcode\"]\n               ^^^^^^^^^^^^^^^^^^^\n\n01_TestDefinitions/autocomplete_trie/test_solution.py:12: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <solution.Solution object at 0x105f0f0e0>, prefix = 'i'\n\n    def query(self, prefix: str) -> List[str]:\n>       return self.root.query(prefix)\n               ^^^^^^^^^\nE       AttributeError: 'Solution' object has no attribute 'root'\n\n01_TestDefinitions/autocomplete_trie/solution.py:49: AttributeError\n=========================== short test summary info ============================\nFAILED 01_TestDefinitions/autocomplete_trie/test_solution.py::test_autocomplete_basic\n============================== 1 failed in 0.03s ===============================\n",
  "test_errors": "",
  "complexity_metrics": {
    "total_complexity_score": 0.3687,
    "python": {
      "cyclomatic_avg": 2.142857142857143,
      "cyclomatic_max": 5,
      "wmc": 15,
      "maintainability_index": 52.551273805821616,
      "max_nesting_depth": 4,
      "halstead_volume": 0,
      "lloc": 43,
      "loc": 49
    },
    "lisp": {
      "lisp_max_depth": 5,
      "lisp_constraints": 6,
      "lisp_rules": 3,
      "lisp_token_count": 131
    }
  }
}